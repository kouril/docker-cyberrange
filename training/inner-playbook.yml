---

- hosts: all
  become: yes

  vars_files:
    - "vars/root_ssh_keys.yml"
    - "vars/training_network.yml"

  pre_tasks:
    - name: Install dependencies, avoid a warning
      raw: "{{ item }}"
      loop:
        - apt-get update
        - apt-get -y install python3-apt

  roles:

    - role: common

    - role: docker

    - role: users
      vars:
        users: 
          - name: "training"
            passwd: "strudl"
            ssh_key: "{{ lookup('file', 'ssh/user.pub') }}"
            groups: "docker"
